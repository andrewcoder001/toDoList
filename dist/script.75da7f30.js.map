{"version":3,"sources":["../utils/addGlobalEventListener.js","dragAndDrop.js","script.js"],"names":["addGlobalEventListener","listener","property","callback","document","addEventListener","e","target","matches","setupToDoList","transferTask","selectedTask","closest","taskClone","cloneNode","shadow","offset","setupDragItems","setupDragEvents","taskRect","getBoundingClientRect","x","clientX","left","y","clientY","top","classList","add","positionClone","body","append","style","height","innerHTML","parentElement","insertBefore","mouseMoveFunction","dropArea","getDropArea","closestChild","Array","from","children","find","child","rect","removeEventListener","startColumn","endColumn","draggingTask","index","indexOf","removeDragElements","once","remove","element","mousePosition","console","log"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"..\\main","sourcesContent":["export default function addGlobalEventListener(listener, property, callback){\r\n    document.addEventListener(listener, (e)=>{\r\n        if(e.target.matches(property)){\r\n            callback(e);\r\n        }\r\n    })\r\n}","import addGlobalEventListener from '../utils/addGlobalEventListener';\r\n\r\n\r\nexport default function setupToDoList(transferTask){ \r\n\r\n    addGlobalEventListener('mousedown', '[data-task-element]', e => {\r\n        const selectedTask = e.target.closest('[data-task]')\r\n        const taskClone = selectedTask.cloneNode(true);\r\n        const shadow = selectedTask.cloneNode();\r\n        const offset = setupDragItems(selectedTask, taskClone, shadow,e);\r\n      \r\n        setupDragEvents(selectedTask, taskClone, offset, shadow, transferTask)\r\n     \r\n\r\n    })    \r\n}\r\n\r\nfunction setupDragItems(selectedTask, taskClone, shadow, e){\r\n    const taskRect = selectedTask.getBoundingClientRect();\r\n  //stopped on offset\r\n  const offset = {\r\n    x: e.clientX - taskRect.left,\r\n    y: e.clientY - taskRect.top\r\n\r\n  }\r\n\r\n    // Adding Class\r\n    selectedTask.classList.add('hide');\r\n    taskClone.classList.add('dragging');\r\n\r\n    // Positioning of Clone     \r\n    positionClone(taskClone, e, offset)\r\n\r\n    // Append to Document\r\n    document.body.append(taskClone)\r\n\r\n    // Shadow Setup\r\n    shadow.style.height = `${taskRect.height}px`\r\n    shadow.classList.add('shadow');\r\n    shadow.innerHTML = '';\r\n    selectedTask.parentElement.insertBefore(shadow, selectedTask)\r\n\r\n    return offset;\r\n}\r\n\r\nfunction setupDragEvents(selectedTask, taskClone, offset,shadow, transferTask){\r\n    const mouseMoveFunction = (e) => {\r\n        // Create an area for shadow based on e.target (mouse location)\r\n        const dropArea = getDropArea(e.target)\r\n        positionClone(taskClone, e, offset)\r\n        if(dropArea == null) return\r\n\r\n               // Form an 'array from' dropArea's children, then find...\r\n        const closestChild = Array.from(dropArea.children).find(child => {\r\n            const rect = child.getBoundingClientRect()\r\n            // closestChild element is the element that is halfway up after clientY\r\n            return e.clientY < rect.top  + rect.height / 2\r\n        })\r\n\r\n    \r\n        if(closestChild != null){\r\n            dropArea.insertBefore(shadow, closestChild)\r\n        } else {\r\n            dropArea.append(shadow)\r\n        }\r\n        \r\n    }\r\n\r\n    \r\n    document.addEventListener('mousemove', mouseMoveFunction)\r\n    document.addEventListener('mouseup', e => {\r\n        document.removeEventListener('mousemove', mouseMoveFunction)\r\n        const dropArea = getDropArea(shadow);\r\n        if(dropArea){\r\n            dropArea.insertBefore(selectedTask, shadow)\r\n\r\n            transferTask({\r\n                startColumn: getDropArea(selectedTask),\r\n                endColumn: dropArea,\r\n                draggingTask: selectedTask,\r\n                index: Array.from(dropArea.children).indexOf(shadow)\r\n            })\r\n        }\r\n        removeDragElements(selectedTask, taskClone, shadow)\r\n      \r\n    }, { once: true })\r\n}\r\n\r\nfunction removeDragElements(selectedTask, taskClone, shadow){\r\n    selectedTask.classList.remove('hide')\r\n    taskClone.remove()\r\n    shadow.remove()\r\n}\r\n\r\nfunction getDropArea(element){\r\n    // Detect and return shadow area of mouse target, where it hovers.\r\n    if(element.matches('[data-task-column]')){\r\n        return element\r\n    } else {\r\n       return element.closest('[data-task-column]')\r\n    }\r\n}\r\n\r\n\r\nfunction positionClone(taskClone, mousePosition, offset){\r\n    taskClone.style.top = `${mousePosition.clientY - offset.y}px`;\r\n    taskClone.style.left = `${mousePosition.clientX - offset.x}px`;\r\n}","import setupToDoList from './dragAndDrop';\r\n\r\nsetupToDoList(transferTask);\r\n\r\nfunction transferTask(e){\r\n    console.log(e)\r\n}"]}